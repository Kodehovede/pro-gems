namespace SpriteKind {
    export const bonus = SpriteKind.create()
    export const gun = SpriteKind.create()
}
scene.onOverlapTile(SpriteKind.Player, sprites.castle.rock1, function (sprite, location) {
    level += 1
    make_tilemap(level)
})
controller.B.onEvent(ControllerButtonEvent.Pressed, function () {
    if (loaded > 0) {
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . 4 4 4 5 5 4 4 4 . . . . 
            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
            . . . . 4 4 2 2 2 2 4 4 . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, kitkat, 100, 0)
        loaded += -1
    }
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.gun, function (sprite, otherSprite) {
    fireball.destroy(effects.confetti, 500)
    loaded = 5
})
sprites.onOverlap(SpriteKind.Player, SpriteKind.bonus, function (sprite, otherSprite) {
    bonus2.setImage(img`
        . b b b b b b b b b b b b b b . 
        b e 4 4 4 4 4 4 4 4 4 4 4 4 4 b 
        b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
        b e e 4 4 4 4 4 4 4 4 4 4 e e b 
        b b b b b b b d d b b b b b b b 
        . b b b b b b c c b b b b b b . 
        b c c c c c b c c b c c c c c b 
        b c c c c c c b b c c c c c c b 
        b c c c c c c c c c c c c c c b 
        b c c c c c c c c c c c c c c b 
        b b b b b b b b b b b b b b b b 
        b e e e e e e e e e e e e e e b 
        b e e e e e e e e e e e e e e b 
        b c e e e e e e e e e e e e c b 
        b b b b b b b b b b b b b b b b 
        . b b . . . . . . . . . . b b . 
        `)
    pause(500)
    bonus2.destroy(effects.fountain, 100)
    for (let value of lol) {
        tiles.setTileAt(value, myTiles.transparency16)
        tiles.setWallAt(value, false)
    }
})
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (kitkat.vy == 0) {
        kitkat.vy = -150
    }
})
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    kitkat.setImage(img`
        . . . . . . . . . . . . . 
        . . . f f f f f f . . . . 
        . f f f f f f f f f . . . 
        . f f f f f f c f f f . . 
        f f f f c f f f c f f f . 
        f c f f c c f f f c c f f 
        f c c f f f f e f f f f f 
        f f f f f f f e e f f f . 
        f f e e f b f e e f f . . 
        . f e 4 e 1 f 4 4 f f . . 
        . f f f e e 4 4 4 f . . . 
        . . f e 4 4 e e f f . . . 
        . . f e 4 4 e 7 7 f . . . 
        . f f f e e f 6 6 f f . . 
        . f f f f f f f f f f . . 
        . . f f . . . f f f . . . 
        `)
    kitkat.image.flipX()
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    kitkat.setImage(img`
        . . . . . . . . . . . . . 
        . . . f f f f f f . . . . 
        . f f f f f f f f f . . . 
        . f f f f f f c f f f . . 
        f f f f c f f f c f f f . 
        f c f f c c f f f c c f f 
        f c c f f f f e f f f f f 
        f f f f f f f e e f f f . 
        f f e e f b f e e f f . . 
        . f e 4 e 1 f 4 4 f f . . 
        . f f f e e 4 4 4 f . . . 
        . . f e 4 4 e e f f . . . 
        . . f e 4 4 e 7 7 f . . . 
        . f f f e e f 6 6 f f . . 
        . f f f f f f f f f f . . 
        . . f f . . . f f f . . . 
        `)
})
function make_tilemap (levels: number) {
    if (levels == 1) {
        tiles.setTilemap(tiles.createTilemap(hex`78001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000807000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090a000000000000000000000000000000000000000202000200000200000200000000000000000000000000000202000000000d0d0d0d000000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000c000000000b00000000000000000000000000000000000000020000000000000000000000000000000000000000000000000002020200000000000000000d0000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010101010101010105050101010101010100000000000000000202000000000000000000000000000200000200020002000200020202020000000000000000000d00000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020606020202020202020200000000000002020000000000000000000000000002020000020002000200020002020202000000000000000000000d000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000202020202020202020206060202020202020202020202000002020000000000000002000002000002020200000200020002000200020202020000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002020202020202020202060602020200000000000000000000000000000000000200020000020000020202000002000200020002000202020200000202020000000202020202020202020202020000000000000000000002020000000202000000020202020202000000000000000000000000000000000f020202020202020202020606000000000000000000000000000000000200000202000200000200000202020000020002000200020002020202000002020200000002020202020202020202020202000000000000000002020200000002020000000202020202020200000000000000000002020202020202020202020202020202020606000000000000000000000000000000020200000202000200000200000202020000020002000200020002020202000002020200000002020202020202020202020202020202020202020202020200000002020000000202020202020202000000000000000202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020200000000020202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020203030303020202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020203030303020202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020203030303020202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020203030303020202020202020202020202020202020202020202020202030302020303020203030202020203030202030203030203030202020303020302030203020302020202030302020203030302020202020202020202020202020202020202020202020203030302020303030202020202020202020203030303020202020202020202`, img`
            .............................................................2.......2..................................................
            .............................................................2.......2..................................................
            ...............................22.2..2..2..............22....2222....2..................................................
            ............................2.........................222........2...2..................................................
            2222222222..2222222........22.............2..2.2.2.2.2222.........2..2..................................................
            2222222222..22222222......22.............22..2.2.2.2.2222..........2.2..................................................
            2222222222..22222222222..22.......2..2..222..2.2.2.2.2222............2..................................................
            2222222222..222.................2.2..2..222..2.2.2.2.2222..222...222222222222..........22...22...222222.................
            2222222222..................2..22.2..2..222..2.2.2.2.2222..222...22222.......2........2.2...22...2.....2.........2222222
            2222222222.................22..22.2..2..222..2.2.2.2.2222..222...22222........22222222..2...22...2......2.......22......
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222..................2...22...2.......22....22.......
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222..................2...22...2........2....2........
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222..................2...22...2........2....2........
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222.................22...22...2........2....2........
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222.................22...22...2........2....2........
            222222222222222..22..22..2222..22.2..2..222..2.2.2.2.2222..222...22222.................22...22...2.......22....2........
            `, [myTiles.transparency16,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava0,myTiles.tile3,sprites.dungeon.hazardWater,myTiles.tile4,myTiles.tile6,myTiles.tile7,myTiles.tile10,myTiles.tile11,myTiles.tile1,myTiles.tile5,sprites.builtin.forestTiles29,sprites.builtin.forestTiles9,sprites.castle.rock1], TileScale.Sixteen))
    } else if (levels == 2) {
        loaded = 0
        tiles.setTilemap(tiles.createTilemap(hex`78001000000000020202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000807000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000090a000000000000000000000000000000000000000202000200000200000200000000000000000000000000000202000000000d0d0d0d000000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000b00000000000000000000000000000000000000020000000000000000000000000000000000000000000000000002020200000000000000000d0000000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010101010101010105050101010000000100000000000000000202000000000000000000000000000200000200000002000000020202020000000000000000000d00000e0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020202020202020202020606020202000000020000000000000002020000000000000000000000000002020000020000000200000002020202000000000000000000000d000e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000202020202020202020206060202020000000200000200000002020000000000000002000002000002020200000200000002000000020202020000000000000000000000000e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002020202020202020202060602020200000000000000000000000000000000000200020000020000020202000002000000020000000202020200000202020000000202020202020200000002020000000000000000000002020000000202000000020200000002000000000000000000000000000000000f020202020202020202020606000000000000000000000000000000000200000202000200000200000202020000020000000200000002020202000002020200000002020202020202000000020202000000000000000002020200000002020000000202000000020200000000000000000002020202020202020202020202020202020606000000000000000000000000000000020200000202000200000200000202020000020000000200000002020202000002020200000002020202020202000000020202020202020202020202020200000002020000000202000000020202000000000000000202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020200000000020202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020203030303020202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020203030303020202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020203030303020202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020203030303020202020202020202020202020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302020202030302020203030302020202020202030303020202020202020202020202020203030302020303030202030303020202020203030303020202020202020202`, img`
            ...2.2.......................................................2.......2..................................................
            .............................................................2.......2..................................................
            ...............................22.2..2..2..............22....2222....2..................................................
            ............................2.........................222........2...2..................................................
            2222222222..222...2........22.............2..2...2...2222.........2..2..................................................
            2222222222..222...2.......22.............22..2...2...2222..........2.2..................................................
            2222222222..222...2..2...22.......2..2..222..2...2...2222............2..................................................
            2222222222..222.................2.2..2..222..2...2...2222..222...2222222...22..........22...22...22...2.................
            2222222222..................2..22.2..2..222..2...2...2222..222...22222.2...2.2........2.2...22...22...22.........2222222
            2222222222.................22..22.2..2..222..2...2...2222..222...22222.2...2..22222222..2...22...22...2.2.......22......
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2............2...22...22...2..22....22.......
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2............2...22...22...2...2....2........
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2............2...22...22...2...2....2........
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2...........22...22...22...2...2....2........
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2...........22...22...22...2...2....2........
            222222222222222...2..2...2222..22.2..2..222..2...2...2222..222...22222.2...2...........22...22...22...2..22....2........
            `, [myTiles.transparency16,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava0,myTiles.tile3,sprites.dungeon.hazardWater,myTiles.tile4,myTiles.tile6,myTiles.tile7,myTiles.tile10,myTiles.tile11,myTiles.tile1,myTiles.tile5,sprites.builtin.forestTiles29,sprites.builtin.forestTiles9,sprites.castle.rock1], TileScale.Sixteen))
        tiles.placeOnRandomTile(kitkat, myTiles.tile3)
        gost = sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......fd1111111f.......
            ......fdd1111111df......
            ......fddd111111df......
            ......fdddddd111df......
            ......fbddddbfd1df......
            ......fcbbbdcfddbf......
            .......fcbb11111f.......
            ........fffff1b1f.......
            ........fb111cfbf.......
            ........ffb1b1ff........
            ......f.fffbfbf.........
            ......ffffffff..........
            .......fffff............
            ........................
            ........................
            ........................
            ........................
            `, SpriteKind.Enemy)
        tiles.placeOnRandomTile(gost, myTiles.tile5)
        gost.x += 14
    } else if (levels == 3) {
        loaded = 0
        tiles.setTilemap(tiles.createTilemap(hex`78001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000706000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000809000000000000000000000000000000000000000202000200000200000200000000000000000000000000000202000000000c0c0c0c000000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000f00000b000000000a00000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000020200000000000000000c0000000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000101010101010104040101010000000100000000000000000202000000000000000000000000000200000200000002000000020002020000000000000000000c00000d0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000020202020202020505020202000000020000000000000002020000000000000000000000000002020000020000000200000002000202000000000000000000000c000d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000202020202020205050202020000000200000200000002020000000000000002000002000002020200000200000002000000020002020000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002000002020202020202050502020200000000000000000000000000000000000200020000020000020202000002000000020000000200020200000200020000000202020202020200000002020000000000000000000002020000000002000000020000000002000000000000000000000000000000000e020000020202020202020505000000000000000000000000000000000200000202000200000200000202020000020000000200000002000202000002000200000002020202020202000000020202000000000000000002020200000000020000000200000000020200000000000000000002000000000202020000020202020202020505000000000000000000000000000000020200000202000200000200000202020000020000000200000002000202000002000200000002020202020202000000020202020202020202020202020200000000020000000200000000020202000000000000000202000000000202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202020303020202020202020202020202030303020303020303030202020203030202030203030203030202020303020303030203030302030202030302030203030302020202020202030303020202020202020202020202020203030303020303030203030303020202020203030303020202030303030202`, img`
            .............................................................2.......2..................................................
            .............................................................2.......2..................................................
            ...............................22.2..2..2..............22....2222....2..................................................
            ............................2..........................22........2...2..................................................
            2..2222222..222...2........22.............2..2...2...2.22.........2..2..................................................
            2..2222222..222...2.......22.............22..2...2...2.22..........2.2..................................................
            2..2222222..222...2..2...22.......2..2..222..2...2...2.22............2..................................................
            2..2222222..222.................2.2..2..222..2...2...2.22..2.2...2222222...22..........22....2...2....2.................
            2..2222222..................2..22.2..2..222..2...2...2.22..2.2...22222.2...2.2........2.2....2...2....22.........2....22
            2..2222222.................22..22.2..2..222..2...2...2.22..2.2...22222.2...2..22222222..2....2...2....2.2.......22....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2............2....2...2....2..22....222....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2............2....2...2....2...2....2.2....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2............2....2...2....2...2....2.2....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2...........22....2...2....2...2....2.2....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2...........22....2...2....2...2....2.2....2.
            2..222222222222...2..2...2222..22.2..2..222..2...2...2.22..2.2...22222.2...2...........22....2...2....2..22....2.2....2.
            `, [myTiles.transparency16,sprites.castle.tilePath2,sprites.castle.tilePath5,sprites.dungeon.hazardLava0,sprites.dungeon.hazardWater,myTiles.tile4,myTiles.tile6,myTiles.tile7,myTiles.tile10,myTiles.tile11,myTiles.tile1,myTiles.tile5,sprites.builtin.forestTiles29,sprites.builtin.forestTiles9,sprites.castle.rock1,myTiles.tile2], TileScale.Sixteen))
        tiles.placeOnRandomTile(kitkat, myTiles.tile2)
        gost = sprites.create(img`
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......fd1111111f.......
            ......fdd1111111df......
            ......fddd111111df......
            ......fdddddd111df......
            ......fbddddbfd1df......
            ......fcbbbdcfddbf......
            .......fcbb11111f.......
            ........fffff1b1f.......
            ........fb111cfbf.......
            ........ffb1b1ff........
            ......f.fffbfbf.........
            ......ffffffff..........
            .......fffff............
            ........................
            ........................
            ........................
            ........................
            `, SpriteKind.Enemy)
        tiles.placeOnRandomTile(gost, myTiles.tile5)
        gost.x += 14
    } else {
    	
    }
}
sprites.onOverlap(SpriteKind.Player, SpriteKind.Enemy, function (sprite, otherSprite) {
    if (sprite.y < otherSprite.y) {
        otherSprite.destroy(effects.fire, 100)
        bonus2 = sprites.create(img`
            . . b b b b b b b b b b b b . . 
            . b e 4 4 4 4 4 4 4 4 4 4 e b . 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e 4 4 4 4 4 4 4 4 4 4 4 4 e b 
            b e e 4 4 4 4 4 4 4 4 4 4 e e b 
            b e e e e e e e e e e e e e e b 
            b e e e e e e e e e e e e e e b 
            b b b b b b b d d b b b b b b b 
            c b b b b b b c c b b b b b b c 
            c c c c c c b c c b c c c c c c 
            b e e e e e c b b c e e e e e b 
            b e e e e e e e e e e e e e e b 
            b c e e e e e e e e e e e e c b 
            b b b b b b b b b b b b b b b b 
            . b b . . . . . . . . . . b b . 
            `, SpriteKind.bonus)
        tiles.placeOnTile(bonus2, tiles.getTileLocation(62, 1))
        fireball = sprites.create(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . 4 4 4 5 5 4 4 4 . . . . 
            . . . 3 3 3 3 4 4 4 4 4 4 . . . 
            . . 4 3 3 3 3 2 2 2 1 1 4 4 . . 
            . . 3 3 3 3 3 2 2 2 1 1 5 4 . . 
            . 4 3 3 3 3 2 2 2 2 2 5 5 4 4 . 
            . 4 3 3 3 2 2 2 4 4 4 4 5 4 4 . 
            . 4 4 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . 4 2 3 3 2 2 4 4 4 4 4 4 4 4 . 
            . . 4 2 3 3 2 4 4 4 4 4 2 4 . . 
            . . 4 2 2 3 2 2 4 4 4 2 4 4 . . 
            . . . 4 2 2 2 2 2 2 2 2 4 . . . 
            . . . . 4 4 2 2 2 2 4 4 . . . . 
            . . . . . . 4 4 4 4 . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, SpriteKind.gun)
        tiles.placeOnTile(fireball, tiles.getTileLocation(70, 6))
    } else {
        game.over(false, effects.melt)
    }
})
let bonus2: Sprite = null
let fireball: Sprite = null
let projectile: Sprite = null
let loaded = 0
let gost: Sprite = null
let kitkat: Sprite = null
let lol: tiles.Location[] = []
let level = 0
level = 1
make_tilemap(level)
lol = tiles.getTilesByType(sprites.builtin.forestTiles9)
kitkat = sprites.create(img`
    . . . f f f f f . . . . . 
    . f f f f f f f f f . . . 
    . f f f f f f c f f f . . 
    f f f f c f f f c f f . . 
    f c f f c c f f f c c f f 
    f c c f f f f e f f f f f 
    f f f f f f f e e f f f . 
    f f e e f b f e e f f . . 
    . f e 4 e 1 f 4 4 f . . . 
    . f f f e 4 4 4 4 f . . . 
    . . f e e e e e f f . . . 
    . . e 4 4 e 7 7 7 f . . . 
    . . e 4 4 e 7 7 7 f . . . 
    . . f e e f 6 6 6 f . . . 
    . . . f f f f f f . . . . 
    . . . . f f f . . . . . . 
    `, SpriteKind.Player)
tiles.placeOnRandomTile(kitkat, myTiles.tile3)
controller.moveSprite(kitkat, 100, 0)
kitkat.ay = 300
scene.cameraFollowSprite(kitkat)
gost = sprites.create(img`
    ........................
    ........................
    ........................
    ........................
    ..........ffff..........
    ........ff1111ff........
    .......fb111111bf.......
    .......f1111111df.......
    ......fd1111111ddf......
    ......fd111111dddf......
    ......fd111ddddddf......
    ......fd1dfbddddbf......
    ......fbddfcdbbbcf......
    .......f11111bbcf.......
    .......f1b1fffff........
    .......fbfc111bf........
    ........ff1b1bff........
    .........fbfbfff.f......
    ..........ffffffff......
    ............fffff.......
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.Enemy)
tiles.placeOnRandomTile(gost, myTiles.tile1)
gost.x += 14
loaded = 0
game.onUpdate(function () {
    if (kitkat.y > 200) {
        game.over(false, effects.melt)
    }
    if (gost.tileKindAt(TileDirection.Right, myTiles.tile5)) {
        gost.vx = 50
        gost.setImage(img`
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......fd1111111f.......
            ......fdd1111111df......
            ......fddd111111df......
            ......fdddddd111df......
            ......fbddddbfd1df......
            ......fcbbbdcfddbf......
            .......fcbb11111f.......
            ........fffff1b1f.......
            ........fb111cfbf.......
            ........ffb1b1ff........
            ......f.fffbfbf.........
            ......ffffffff..........
            .......fffff............
            ........................
            ........................
            ........................
            ........................
            `)
    } else if (gost.tileKindAt(TileDirection.Left, myTiles.tile1)) {
        gost.vx = -50
        gost.setImage(img`
            ........................
            ........................
            ........................
            ........................
            ..........ffff..........
            ........ff1111ff........
            .......fb111111bf.......
            .......f1111111df.......
            ......fd1111111ddf......
            ......fd111111dddf......
            ......fd111ddddddf......
            ......fd1dfbddddbf......
            ......fbddfcdbbbcf......
            .......f11111bbcf.......
            .......f1b1fffff........
            .......fbfc111bf........
            ........ff1b1bff........
            .........fbfbfff.f......
            ..........ffffffff......
            ............fffff.......
            ........................
            ........................
            ........................
            ........................
            `)
    }
    if (loaded > 0) {
        kitkat.say(loaded)
    } else {
        kitkat.say("")
    }
})
game.onUpdate(function () {
    if (kitkat.vx == 0) {
        kitkat.setImage(img`
            . . . f f f f f . . . . . 
            . f f f f f f f f f . . . 
            . f f f f f f c f f f . . 
            f f f f c f f f c f f . . 
            f c f f c c f f f c c f f 
            f c c f f f f e f f f f f 
            f f f f f f f e e f f f . 
            f f e e f b f e e f f . . 
            . f e 4 e 1 f 4 4 f . . . 
            . f f f e 4 4 4 4 f . . . 
            . . f e e e e e f f . . . 
            . . e 4 4 e 7 7 7 f . . . 
            . . e 4 4 e 7 7 7 f . . . 
            . . f e e f 6 6 6 f . . . 
            . . . f f f f f f . . . . 
            . . . . f f f . . . . . . 
            `)
    }
})
